<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <!-- Ensure that everything scales appropriately on a mobile device -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400' rel='stylesheet' type='text/css'>
    <link href="css/styles.css" rel="stylesheet">
</head>
<body onload='androidInit()'>
    <div id="gameArea">
        <!-- This is where the templates defined below will be used -->
    </div>

    <!-- Main Title Screen that appears when the page loads for the first time and you're a browser! -->
    <script id="intro-screen-template-browser" type="text/template">
        <div class ='wrapper'>
    <div id='topBox'>
      <img id='logo' src="data/logo_basic.png">
    </div>
    <div id ='bottomBox'>
      <div id='buttonsWrapper'>

        <!--welcome text -->

        <div id='welcomeText'>
          <div class='infoTextBegin'><h1>welcome to world wide gaming!</h1></div>
          <div class='buttonAndHelpWrapper'>
            <div class='button' id='beginGameButton'>
              <p>begin game ! </p>
            </div>
            <div class='helpBrowser'><p>?</p></div>
          </div>
        </div>

        <!--wait for connection code-->

        <div id='waitForConnectionText'>
          <div class='infoTextBegin'><h1>waiting for an other player...</h1></div>
        </div>

        <!--display code-->
        
        <div id='displayCode'>
          <div class='infoTextBegin'><h1>connect your phone with code</h1></div>
          <div class='infoTextBegin'><h1 id='codeToDisplay'></h1></div>
        </div>
      </div>
    </div>
  </div>
    </script>
    <!-- NEW MOBILE TEMPLATE -->
    <script id="new-mobile-template" type="text/template">
       <div class ='wrapperMobile'>
        <div id='controllerArea'>
            <div id='welcomeScreenMobile'>
                <div id='topBoxMobile'></div>
                <div class='logoBoxMobile'>
                    <img src="data/logo_basic.png">
                </div>
                <div id='bottomBoxMobile'>
                    <div class='buttonMobile clickable' id='welcomeConnectMobile'>
                        <p>connect</p>
                    </div>
                </div>
            </div>
            <div id='connectScreenMobile'>
                <div class='logoBoxMobile'>
                    <img class='logoImgMobile' src="data/logo_basic.png">
                </div>
                <div id='connectBottomBoxMobile'>
                    <div id='connectionButtonsWrapperMobile'>
                        <form><input id='inputPlayerName' type="text" name="teamName" placeholder="city name"></form>
                        <form><input id='inputGameId' type="tel" name="code" maxlength='5' placeholder="code"></form>
                        <div class='buttonMobile clickable' id='connectionButtonMobile'>
                            <p>connect</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id='waitForConnectionScreenMobile'>
                <div class='logoBoxMobile'>
                    <img class='logoImgMobile' src="data/logo_basic.png">
                </div>
                <div id='connectBottomBoxMobile'>
                <div id='playerWaitingMessageWrapper'>
                    <p id='playerWaitingMessage'></p>
                </div>
                </div>
            </div>

        </div>
    </div>
    </script>

    <!-- This is the 'Player' screen. Mobile HTML goes here! -->
    <script id="player-game-template" type="text/template">
            <div id='controlsScreenMobile'>
                <div id='myTurn'><h1>My turn!</h1></div>
                <button id='debug' class='clickable'>send debug</button>
                <div  id='orientationMobileWrapper'>
                    <div class='controlTopBoxMobile'>
                        <div class='dataDisplayWrapperMobile'>
                            <div class='dataDisplayMobile'>
                                <h1 id='angleToDisplay'>15</h1>
                            </div>
                        </div>
                    </div>
                    <div class='logoBoxMobile clickable' id='orientationMobile'>
                        <img class='circleImg' src="data/orange_circle.png">
                        <img src="data/orientation.png" id="compass">
                    </div>
                    <div class='controlTopBoxMobile'>
                        <div class='helpMobile clickable' id='helpOrientation'><p>?</p></div>
                    </div>
                </div>
                <div id='azimuthMobileWrapper'>
                    <div class='controlTopBoxMobile'>
                        <div class='dataDisplayWrapperMobile'>
                            <div class='dataDisplayMobile'>
                                <h1 id='angle'>15</h1>
                            </div>
                        </div>
                    </div>
                    <div class='logoBoxMobile clickable' id='azimuthMobile'>
                        <img class='circleImg' src="data/orange_circle.png">
                        <img src="data/elevation_fixed_s.png">
                        <img src="data/elevation_moves_s.png" id= "elevationImg">
                    </div>
                    <div class='controlTopBoxMobile'>
                        <div class='helpMobile clickable' id='helpElevation'><p>?</p></div>
                    </div>
                </div>
                <div id='forceMobileWrapper' onload='androidInit()'>
                    <div class='controlTopBoxMobile'>
                        <div class='dataDisplayWrapperMobile'>
                            <div class='dataDisplayMobile'>
                                <h1 id='force'></h1>
                            </div>
                        </div>
                    </div>
                    <div class='logoBoxMobile clickable' id='forceMobile'>
                        <img class='circleImg' class='dontTouch' src="data/orange_circle.png">
                        <img class='dontTouch' src="data/force.png" id='precision'>
                        <div class='dontTouch' id='forceImg'></div>
                        <div class='shield' id='forceShield'></div>
                    </div>
                    <div class='controlTopBoxMobile'>
                        <div class='helpMobile clickable' id='helpForce'><p>?</p></div>
                    </div>
                </div>
                <div id='throwMobileWrapper'>
                    <div class='controlTopBoxMobile'>
                        <div class='dataDisplayWrapper'>
                            <div class='dataDisplayMobile'>
                                <h1></h1>
                            </div>
                        </div>
                    </div>
                    <div class='logoBoxMobile clickable' id='throwMobile'>
                        <img class='circleImg' src="data/orange_circle.png">
                        <img src="data/throw.png">
                    </div>
                    <div class='controlTopBoxMobile'>
                        <div class='helpMobile clickable' id='helpThrow'><p>?</p></div>
                    </div>
                </div>
                <div id='zoomMobileWrapper'>
                    <div class='controlTopBoxMobile'>
                        <div class='dataDisplayWrapperMobile'>
                            <div class='dataDisplayMobile'>
                                <h1></h1>
                            </div>
                        </div>
                    </div>
                    <div class='logoBoxMobile clickable' id='zoomMobile'>
                        <img class='circleImg' src="data/orange_circle.png">
                        <img src="data/zoom.png">
                         <div class='shield'></div>
                        <div class='shield clickable' id='zoomPlus'></div>
                        <div class='shield clickable' id='zoomMinus'></div>
                    </div>
                    <div class='controlTopBoxMobile'>
                        <div class='helpMobile clickable' id='helpZoom'><p>?</p></div>
                    </div>
                </div>
                
                <div id='waitMobileWrapper'>
                    <div class='controlTopBoxMobile'>
                        <div class='dataDisplayWrapperMobile'>
                            <div class='dataDisplayMobile'>
                                <h1>wait</h1>
                            </div>
                        </div>
                    </div>
                    <div class='logoBoxMobile' id='waitMobile'>
                        <img src="data/logo_basic.png">
                    </div>
                    <div class='controlTopBoxMobile'>
                        <div class='helpMobile clickable' id='helpWait'><p>?</p></div>
                    </div>
                </div>
                <div id='gameOverMobile'>
                    <div class='controlTopBoxMobile'>
                        <div class='dataDisplayWrapperMobile'>
                            <div class='dataDisplayMobile'>
                                <h1>game over</h1>
                            </div>
                        </div>
                    </div>
                    <div class='logoBoxMobile'>
                        <img src="data/logo_game_over_blue.png">
                    </div>
                    <div class='controlTopBoxMobile'>
                    </div>
                </div>
                <div id='dataContainerOrientation'></div>
                <div id='dataContainerMotion'></div>
            </div>
    </script>


     <!-- Main Title Screen that appears when the page loads for the first time and you're a mobile!-->
    <script id="intro-screen-template-mobile" type="text/template">
        <div class="titleWrapper">
            <div class="title">
                world wide gaming AS CONTROLLER
            </div>
            <div class="buttons">
                <button id="btnCreateGame" class="btn left">CREATE</button>
                <button id="btnJoinGameController" class="btn right">JOIN AS CONTROLLER</button>
                <button id="btnJoinGameBrowser" class="btn middle">JOIN AS BROWSER</button>
                <div style="clear:both"></div>
            </div>
        </div>
    </script>
  
    <!-- This scrreen appears when a player clicks "JOIN AS CONTROLLER" on the Title Screen -->
    <script id="join-game-template" type="text/template">
        <div class="joinGameWrapper">
            <div class="info">
            <p>You are trying to join as a controller.</p>
                <label for="inputPlayerName">Your Name:</label>
                <input id="inputPlayerName" type="text" />
            </div>
            <div class="info">
                <label for="inputGameId">Game ID:</label>
                <input id="inputGameId" type="tel"/>
            </div>
            <div class="info buttons">
                <button id="btnStart" class="btn">Start</button>
                <div id="playerWaitingMessage"></div>
            </div>
        </div>
    </script>

    <!-- This is the 'Host' screen. Cesium goes here! -->
    <script id="host-game-template" type="text/template">
        <div class ='wrapperGame'>
        <div id='gameAreaHost'>
            <div class='staticMap'>
              <div class='mapToShow'>
                <img id='staticImg' src='http://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/46.54, 6.59/15?mapSize=300,200&key=AvRFjXkotEcTdjuZLdPtg2JqWv3yKtMLkBeQnQvQ7nERmEWpdpxqP9itXTf55Yb9'>
              </div>
            </div>
           <div id="cesiumContainer" class="fullSize"></div>
            <div id='gameInfos'>
                <div id='players'>
                    <div id='player1'>
                        <div class='playerInfos'>
                            <div class='teamName' id='teamNamep1'>
                                <h2 class='teamNameToWrite'>Martigny </h2>
                            </div>
                            <div class='score' id='scorep1'>
                                <h1 class='scoreToWrite'>6</h1>
                            </div>
                            <div class='pointsWrapper' id='pointsWrapperp1'>
                                <div class='point1'></div>
                                <div class='point2'></div>
                                <div class='point3'></div>
                            </div>
                        </div>
                    </div>
                    <div id ='player2'>
                        <div class='playerInfos'>
                            <div class='teamName' id='teamNamep2'>
                                <h2 class='teamNameToWrite'>Bruxelles</h2>
                            </div>
                            <div class='score' id='scorep2'>
                                <h1 class='scoreToWrite'>0</h1>
                            </div>
                            <div class='pointsWrapper' id='pointsWrapperp2'>
                                <div class='point1'></div>
                                <div class='point2'></div>
                                <div class='point3'></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id='target'>
                    <div id='targetNameWrapper'>
                        <h1 id='targetName'>target</h1>
                    </div>
                    <div id='targetLogo'>
                        <img src="data/logo_game.png">
                    </div>
                </div>
            </div>

            <div class='overlay' id='targetOverlay'>
                <div class='alertBox' id='newTargetAlert'>
                    <div><h1>Your target is:</h1></div>
                    <div><h1 id='targetToWrite'></h1></div>
                </div>
            </div>

            <div class='overlay' id='scoreResultOverlay'>
                <div class='alertBox' id='newScore'>
                    <div><h1>You landed</h1></div>
                    <div><h1>XXXX km from the target</h1></div>
                </div>
            </div>

            <div class='overlay' id='tutorialOverlayOrientation'>
                <div class='tutorialTopBox alertBox'>
                    <div id='chooseOrientationImgSequence'></div>
                </div>
                <div class='tutorialBottomBox alertBox'>
                    <div id='orientationExplanation'>
                        <h1>Choose orientation!</h1>
                        <p>Point your phone towards the direction of the target, <br>and validate with a click!</p>
                    </div>
                </div>
            </div>
            
            <div class='overlay' id='tutorialOverlayElevation'>
                <div class='tutorialTopBox alertBox'>
                    <div id='chooseElevationimgSequence'></div>
                </div>
                <div class='tutorialBottomBox alertBox'>
                    <div id='elevationExplanation'>
                        <h1>Choose elevation!</h1>
                        <p>Tilt your phone to get the angle of your shoot, <br>and validate with a click!</p>
                    </div>
                </div>
            </div>
            
            <div class='overlay' id='tutorialOverlayForce'>
                <div class='tutorialTopBox alertBox'>
                        <div id='chooseForceImgSequence'></div>
                </div>
                <div class='tutorialBottomBox alertBox'>
                        <div id='forceExplanation'>
                            <h1>Choose the force!</h1>
                            <p>Press to increase the force and thus the distance!</p>
                        </div>
                </div>
            </div>
            
            <div class='overlay' id='tutorialOverlayThrow'>
                <div class='tutorialTopBox alertBox'>
                    <div id='throwImgSequence'></div>
                </div>
                <div class='tutorialBottomBox alertBox'>
                    <div id='zoomExplanation'>
                        <h1>Throw it!</h1>
                        <p>Throw your bullet with your phone!</p>
                    </div>
                </div>
            </div>
            
            <div class='overlay' id='tutorialOverlayZoom'>
                <div class='tutorialTopBox alertBox'>
                    <div id='zoomImgSequence'></div>
                </div>
                <div class='tutorialBottomBox alertBox'>
                    <div id='zoomExplanation'>
                        <h1>Zoom out!</h1>
                        <p>You can zoom in or out with your thumb while your bullet is flying.</p>
                    </div>
                </div>
            </div>


            <div id='gameOverOverlay'>
                <div id='gameOver'>
                    <img src="data/logo_game_over_blue.png">
                    <div id='gameOverResult'>
                        <h1 class='inline'>city</h1>
                        <h1 class='inline' id='winnerTeamToWrite'>XXX</h1>
                        <h1 class='inline'>won with only </h1>
                        <h1 class='inline' id ='winnerScoreToWrite'>XXX</h1>
                        <h1 class='inline' >km of unacurracy!</h1>
                    </div>
                    <div id='restart'>
                        <p>restart</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
    </script>

    <script src="../../Build/Cesium/Cesium.js"></script>
    <script src="libs/jquery-2.0.2.min.js"></script>
    <script src="libs/jquery.spritely.js" type="text/javascript"></script>
    <script src="libs/textFit.min.js"></script>
    <script src="libs/fastclick.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="mainCesium3.js"></script>
    <script>
    function testBody(){
    console.log('this is a test for the body');
    }
    </script>
    <script>
    //this is a script to prevent the menu from appearing in android
    function absorbEvent_(event) {
      var e = event || window.event;
      e.preventDefault && e.preventDefault();
      e.stopPropagation && e.stopPropagation();
      e.cancelBubble = true;
      e.returnValue = false;
      return false;
    }

    function preventLongPressMenu(node) {
      node.ontouchstart = absorbEvent_;
      node.ontouchmove = absorbEvent_;
      node.ontouchend = absorbEvent_;
      node.ontouchcancel = absorbEvent_;
    }

    function androidInit() {
        console.log('init android stuff!!!');
        //preventLongPressMenu(document.getElementById('theimage'));
        //document.getElementsByClassName()
        //preventLongPressMenu(document.getElementById('controlsScreenMobile'));
        preventLongPressMenu(document.getElementsByClassName('dontTouch'));
        console.log('DO NOT TOUCH!!!');
    }
  </script>
  <script type="text/javascript">
        (function($) {
            $(document).ready(function() {
                console.log('Go sprite!');
                $('#chooseOrientationImgSequence').sprite({fps: 2, no_of_frames: 4});
                $('#chooseElevationimgSequence').sprite({fps: 2, no_of_frames: 4});
                $('#chooseForceImgSequence').sprite({fps: 2, no_of_frames: 3});
                $('#throwImgSequence').sprite({fps: 2, no_of_frames: 2});
                $('#zoomImgSequence').sprite({fps: 2, no_of_frames: 2});

            });
            $(document).on('click', '#help', toggleHelp);
            function toggleHelp(){
                console.log('help!');
                $('#tutorialOverlay').toggleClass('isActive');
            }
        })(jQuery);
        
    </script>

</body>
</html>
